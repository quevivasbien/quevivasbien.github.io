<!DOCTYPE html>
<html>
<head>
    <title>Que vivas bien</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="goodness, truth, and summer rainstorms">
    <meta name="author" content="Mckay D Jensen">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../css/kube.min.css" />
    <link rel="stylesheet" href="../css/font-awesome.min.css" />
    <link rel="stylesheet" href="../css/custom.css" />
    <link rel="shortcut icon" href="../img/favicon.png" />
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Fira+Sans:400,700" rel="stylesheet" type="text/css">
</head>
<body>
	<!-- Navigation -->
	<div class="main-nav">
		<div class="container">
			<header class="group top-nav">
				<nav class="navbar logo-w navbar-left" >
					<a class="logo" href="../index.html">Que vivas bien</a>
				</nav>
				<div class="navigation-toggle" data-tools="navigation-toggle" data-target="#navbar-1">
				    <span class="logo">Que vivas bien</span>
				</div>
			    <nav id="navbar-1" class="navbar item-nav navbar-right">
				    <ul>
				        <li><a href="../index.html">Home</a></li>
				        <li><a href="../about.html">About</a></li>
				        <li><a href="../archive.html">Archive</a></li>
				        <!--<li><a href="#">Contact</a></li>-->
				    </ul>
				</nav>
			</header>
		</div>
	</div>

	<!-- Introduction -->
	<div class="intro">
		<div class="container">
			<div class="units-row">
			    <div class="unit-100">
			    	<p id="tagline" class="p-intro">goodness, truth, and summer rainstorms</p>
			    </div>
			</div>
		</div>
	</div>

	<!-- Content -->
	<div class="content">
		<div class="container">
			<!-- Post -->
			<div class="post">
				<!-- Heading -->
				<h1>Fractal explorer</h1>

				<div class="in-content">

				      <p>Over the past few years, I have made a few iterations of code meant to generate images of fractals using Python. My <a href="https://quevivasbien.wordpress.com/2018/04/26/beautiful-math/">first attempt</a> allowed me to generate some basic black and white images of the Mandelbrot set. A year or so later I revisited this code and updated it to allow me to generate some other types of (related fractals) including some Julia sets. You can see one example on the title bar of this site. About a month back, I once again returned to the land of fractals, this time intending to explore some methods of speeding up Python code using multiprocessing and CUDA support with the handy Numba library. With a bit of effort, I was able to generate a fun tool that allows the user to explore the Mandelbrot set in a simple GUI interface, powered either by parallel processing (utilizing all available CPU cores) or the user's GPU. I was pleasantly surprised by how easy it is to run Python code on the GPU (assuming you have an Nvidia GPU) -- the Numba library has built-in support; you just need to install the <a href="https://developer.nvidia.com/how-to-cuda-python">CUDA toolkit</a>, learn <a href="https://numba.pydata.org/numba-doc/0.13/CUDAJit.html">a little bit of syntax</a>,  and you're basically off the ground from there.</p>



                      <p>You can access my Python code at <a href="https://github.com/quevivasbien/fractal-explorer"> this GitHub repository</a>. If you have the necessary packages installed, you can just clone it and launch the explorer from the command line. If you don't have a GPU, you may have to edit some of the code first so it doesn't complain. You can generate some genuinely beautiful images if you look around and mess with the colors. The images below are some examples.</p>

                      <figure>
                        <img class="aligncenter" title="Image of Mandelbrot set" alt="Image of Mandelbrot set" src="../img/fractal-explorer-1.png">
                        <img class="aligncenter" title="Image of Mandelbrot set" alt="Image of Mandelbrot set" src="../img/fractal-explorer-2.png">
                        <figcaption style="text-align: center">A couple of images from the Mandelbrot set</figcaption>
                      </figure>

                      <figure>
                        <img class="aligncenter" title="Image of Mandelbrot set" alt="Image of Mandelbrot set" src="../img/fractal-explorer-3.png">
                        <figcaption style="text-align: center">Screenshot of my Fractal Explorer GUI</figcaption>
                      </figure>

                      <p>The code is really quite fast, allowing me to explore the Mandelbrot set at a high resolution in basically real time, which is impressive given the intense computation needed to render each shot. Your mileage will, of course, vary depending how powerful your computer is. This is a pretty good demonstration of using some basic tricks to bypass most of Python's characteristic slowness -- Numpy and Numba can take you a long way if you take a bit of time to learn how to use them.</p>

                      <hr>

                      <p>The next question I asked myself was how to share this with people who don't want to set up a Python environment for it. One attractive option is to run it natively in a web browser. I figured pure JavaScript would be prohibitively slow, but, luckily, it is possible to compile a fast programming language like C++ or Rust into WebAssembly, which can then be called from JavaScript and run in a web browser. I wanted to try this out, so I took some time to refresh my C++ knowledge, familiarize myself with the <a href="https://emscripten.org/">emscripten</a> toolchain, and implement a browser-based version of the fractal explorer. I was new to a lot of the technologies involved, so the result is not nearly as polished or optimized as it could be, but it does at least provide a fun demonstration of heavy computation in a web browser. You can check it out <a target="_blank" href="../apps/fractal-explorer/">here</a>. I recommend keeping the resolution low until you find a spot you like, at which point you can take the time to render a higher-definition scene. Note that this won't work on a mobile browser, since I don't think they support WebAssembly yet.</p>

                      <h2 id="update">An update</h2>

                      <p>After creating my <a href="./js-raytracing.html">JavaScript raytracer</a>, I was impressed with the speed of my pure JavaScript implementation and quite unimpressed with my C++/WASM implementation. I initially assumed that this was a combination of me not knowing how to properly optimize the C++ code for the task at hand and execution of WASM code having some sort of overhead that becomes prohibitively expensive with rapid repeated execution. Later, I ran across some discussion about how modern web browsers use dynamically optimizing JIT compilation to run JavaScript, and it occurred to me that the kind of algorithm used in both the fractal explorer and the JS raytracer are both quite amenable to optimization with JIT compilation. To test how well this works, I re-wrote the in-browser fractal explorer using pure JavaScript -- you can check out the result <a href="../apps/fractal-explorer/purejs/" style="font-weight: bold">here</a>. I tested this on Chrome, Edge, and Firefox, and the pure JS implementation wildly out-performs the C++/WASM implementation, especially on Chrome and Edge (which are both based on the Chromium engine). The folks at Google have clearly put a lot of effort into making JavaScript execution as fast as possible, to the point that implementing code via WebAssembly doesn't really seem worthwhile to me, unless you're dealing with a complicated codebase already written in C++ or Rust.</p>

				</div>
				<div class="foot-post">
					<!-- place footer here -->
				</div>
			</div>
			<!-- /post -->

		</div>
	</div>

  <footer>
		<div class="container">
			<a href="../index.html"><img class="aligncenter" src="../img/logo.png" title="Back to home page"></a>
			<p class="text-centered foot-cp">
	    		<a href="../about.html">created by mckay jensen</a>
	    </p>
      <p class="text-centered" style="font-size: 24px;">
        <a href="mailto:jensenm@uchicago.edu"><i class="fa fa-send"></i></a>
        <a href="https://github.com/quevivasbien"><i class="fa fa-github"></i></a>
        <a href="https://www.linkedin.com/in/mckaydjensen/"><i class="fa fa-linkedin"></i></a>
      </p>
		</div>
	</footer>

	<!-- Javascript -->
	<script src="../js/jquery.min.js"></script>
  <script src="../js/kube.min.js"></script>
	<script src="../js/beautiful.js"></script>
</body>
</html>
